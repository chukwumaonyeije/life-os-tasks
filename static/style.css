:root{
  --bg:#f6f7fb;
  --card:#ffffff;
  --muted:#6b7280;
  --accent:#5b21b6;
  --primary:#2563eb;
  --primary-600:#1e40af;
  --success:#16a34a;
  --danger:#b91c1c;
  --glass: rgba(255,255,255,0.6);
  --radius:12px;
}

*{box-sizing:border-box}
body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:var(--bg); margin:0; color:#0f172a}

.app{display:flex; min-height:100vh}
.sidebar{width:220px; background:linear-gradient(180deg,#fff,#fbfbff); border-right:1px solid #eef2ff; padding:28px 18px; display:flex; flex-direction:column; gap:18px}
.brand{font-weight:800; font-size:1.15rem; color:var(--accent)}
.sidebar nav ul{list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px}
.sidebar nav li{padding:8px 10px; border-radius:8px; color:var(--muted); cursor:default}
.sidebar nav li.active{background:rgba(99,102,241,0.08); color:var(--accent); font-weight:600}
.footer-small{margin-top:auto; font-size:.8rem; color:var(--muted)}

.content{flex:1; padding:28px; display:flex; flex-direction:column}
.topbar{display:flex; align-items:center; justify-content:space-between; gap:12px}
.topbar h1{margin:0; font-size:1.5rem}
.host-link{color:var(--primary); text-decoration:none; font-weight:600}

.grid{display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:18px; margin-top:18px}
.panel{background:var(--card); border-radius:var(--radius); padding:16px; box-shadow:0 1px 6px rgba(12,14,26,0.04)}
.panel.span{grid-column:1 / -1}
.panel h2, .panel h3{margin:0 0 10px 0}
.list{display:flex; flex-direction:column; gap:10px; min-height:48px}
.list.compact .card{padding:10px}

.card{background:linear-gradient(180deg, #fff, #fbfbff); border-radius:10px; padding:12px; display:flex; align-items:flex-start; gap:12px; border:1px solid #eef2ff}
.card .meta{color:var(--muted); font-size:.88rem}

.form-row{display:flex; gap:10px; margin-top:12px; align-items:center}
input[type="text"], input[type="search"], input, select{padding:10px 12px; border-radius:8px; border:1px solid #e6eef8; background:white; min-width:0; flex:1}
select{max-width:160px}

.btn{padding:10px 14px; border-radius:8px; border:none; background:var(--primary); color:white; cursor:pointer; font-weight:600}
.btn.primary{background:var(--primary)}
.btn:hover{filter:brightness(.95)}

.toast{position:fixed; right:20px; bottom:20px; padding:10px 14px; border-radius:10px; color:white; z-index:999}
.toast.success{background:var(--success)}
.toast.error{background:var(--danger)}
.hidden{display:none}

.sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}

.task-completed{opacity:.65; text-decoration:line-through}
.ai-badge{display:flex; gap:8px; align-items:center; background:#faf5ff; border-left:3px solid var(--accent); padding:8px; border-radius:6px}
.confidence{color:var(--accent); font-weight:600}

.meta{font-size:.82rem; color:var(--muted)}

@media (max-width:900px){
  .sidebar{display:none}
  .grid{grid-template-columns:1fr}
  .content{padding:16px}
}

/* Modal styles */
.modal{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:2000}
.modal.hidden{display:none}
.modal-backdrop{position:absolute; inset:0; background:rgba(3,7,18,0.45)}
.modal-panel{position:relative; width:90%; max-width:820px; background:var(--card); border-radius:14px; box-shadow:0 12px 40px rgba(2,6,23,0.2); padding:16px; z-index:2}
.modal-header{display:flex; align-items:center; justify-content:space-between; gap:12px}
.modal-header h2{margin:0}
.modal-header button{background:transparent; border:none; font-size:18px; cursor:pointer}
.modal-body{max-height:60vh; overflow:auto; margin-top:12px}
.modal-footer{display:flex; gap:8px; justify-content:flex-end; margin-top:12px}
.preview-grid{display:grid; grid-template-columns:repeat(3,1fr); gap:8px}
.preview-item{background:#f8fafc; padding:10px; border-radius:8px; border:1px solid #eef2ff}
.collision-list{margin-top:8px}
.collision-list li{font-size:.9rem; color:var(--muted)}

/* Diff value presentation */
.diff-value {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', 'Courier New', monospace;
  font-size: 0.9rem;
  line-height: 1.3;
  white-space: pre-wrap;
  word-break: break-word;
  padding: 6px;
}
.diff-value.collapsed{
  max-height: 4.6em; /* ~3 lines */
  overflow: hidden;
  position: relative;
}
.diff-value.collapsed::after{
  content: '';
  position: absolute;
  left:0; right:0; bottom:0; height:2.6em;
  background: linear-gradient(180deg, rgba(255,255,255,0), var(--card));
}
.expand-btn{
  background:transparent; border:1px solid #e6eef8; color:var(--muted); padding:6px 8px; border-radius:6px; cursor:pointer; font-size:.85rem; margin-left:8px
}
.diff-row td{vertical-align:top}

